@*@model IEnumerable<StoreManagementSystem.Entities.categorySetup>*@

@model SMS.Core.SetupViewModel.CategorySetupViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int i = 1;
}


<h2>Category List</h2>

<input type="text" class="form-control col-md-6 pull-right" placeholder="Search..." id="txtSearch" onkeyup="Search()" />

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div id="replaceable_table">
    <table class="table table-bordered">
        <tr>
            <th style="background-color: lightgreen">
                S.N.
            </th>
            @*
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.categoryID)
            </th>
                *@
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.categoryName)
            </th>
            <th style="background-color: lightgreen">
                Image
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.Status)
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.createdBy)
            </th>
            <th style="background-color: lightgreen"> 
                @Html.DisplayNameFor(model => model.createdDate)
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.updatedBy)
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.updatedDate)
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.deletedBy)
            </th>
            <th style="background-color: lightgreen">
                @Html.DisplayNameFor(model => model.deletedDate)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.CategorySetupViewModelList)
        {
            <tr>
                <td>@i</td>
                @*
                <td>
                    @Html.DisplayFor(modelItem => item.categoryID)
                </td>
                *@

                <td>
                    @Html.DisplayFor(modelItem => item.categoryName)
                </td>

                <td>
                    <img src="@item.imagePath" width="100" height="100" />
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                
                <td>
                    @Html.DisplayFor(modelItem => item.createdBy)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.createdDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.updatedBy)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.updatedDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.deletedBy)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.deletedDate)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.categoryID }) |
                    @Html.ActionLink("Details", "Details", new { id = item.categoryID }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.categoryID })

                    @*@Url.Action("Edit","CategorySetup", new { id = item.categoryID })*@
                </td>
            </tr>
            i++;
        }

    </table>
</div>

<script>
    var Search = function () {
        var searchValue = $('#txtSearch').val();
        $.ajax({
            url: '@Url.Action("_SearchCategory", "categorySetup")',
            type: 'GET',
            data: {
                categoryName: searchValue
            },

            success: function (data) {
                console.log(data);
                $('#replaceable_table').empty();
                $('#replaceable_table').html(data);
            }
        });
    };
</script>